<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="0">

        <menuitem id="menu_talend_integration" name="Talend Integration"
            parent="base.menu_config" sequence="50"
            groups="base.group_extended"/>

		<!-- Talend Job -->

        <record id="view_server_action_form_talend" model="ir.ui.view">
            <field name="name">Server Action - Talend</field>
            <field name="model">ir.actions.server</field>
            <field name="inherit_id" ref="base.view_server_action_form"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<data>
                    <notebook position="inside">
                        <page string="Talend Job" attrs="{'invisible':[('state','!=','talend_job')]}">
                            <field name="talend_job_export_type" attrs="{'required':[('state','=','talend_job'),('state','=','talend_job')]}"/>
                            <field name="talend_job_project" attrs="{'required':[('state','=','talend_job'),('talend_job_export_type','=','jar')]}"/>
                            <newline/>
                            <field name="talend_job_name" attrs="{'required':[('state','=','talend_job')]}"/>
                            <field name="talend_job_version" attrs="{'required':[('state','=','talend_job')]}"/>
                            <field name="talend_job_host" colspan="4" attrs="{'invisible': [('talend_job_export_type','=','jar')], 'required': [('state','=','talend_job'),('talend_job_export_type','=','war')]}"/>
                            <field name="talend_job_path" colspan="4" attrs="{'invisible': [('talend_job_export_type','=','war')], 'required': [('state','=','talend_job'),('talend_job_export_type','=','jar')]}"/>
							<notebook colspan="4">
								<page string="Parameters">
		                            <field name="talend_job_param_ids" nolabel="1" colspan="4" mode="tree,form">
		                                <tree string="Parameters" editable="top">
		                                    <field name="key"/>
		                                    <field name="type"/>
		                                    <field name="value" colspan="4"/>
		                                </tree>
		                                <form string="Parameter" col="6">
		                                    <field name="key"/>
		                                    <field name="type"/>
		                                    <field name="value"/>
		                                </form>
		                            </field>
		                            <label colspan="4" string="If you use a formula type, use a python expression using the variable 'object'." align="0.0"/>
								</page>
								<page string="Advanced" attrs="{'invisible': [('talend_job_export_type','=','war')]}">
		                            <field name="talend_job_context" attrs="{'required': [('state','=','talend_job'),('talend_job_export_type','=','jar')]}"/>
		                            <newline/>
	    	                        <field name="talend_job_java_xms" attrs="{'required': [('state','=','talend_job'),('talend_job_export_type','=','jar')]}"/>
	        	                    <field name="talend_job_java_xmx" attrs="{'required': [('state','=','talend_job'),('talend_job_export_type','=','jar')]}"/>
								</page>
							</notebook>
                        </page>
                    </notebook>
                </data>
            </field>
        </record>

		<record id="action_talend_job" model="ir.actions.act_window">
            <field name="name">Talend Jobs</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ir.actions.server</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state', '=', 'talend_job')]</field>
        </record>
		<menuitem action="action_talend_job" id="menu_talend_job" parent="menu_talend_integration" sequence="10"/>

	</data>
</openerp>